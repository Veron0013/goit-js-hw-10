{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from \"flatpickr\";\n// Додатковий імпорт стилів\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nlet userSelectedDate;\nlet timerId;\nlet intervalId;\n\nconst btnStart = document.querySelector(\".button.start\");\nconst btnStop = document.querySelector(\".button.stop\");\nconst inputField = document.querySelector(\".input_field\");\n\nconst classTypes = [\"normal\", \"disabled\"];\n\nconst timerCounter = document.querySelectorAll(\".value\");\n\nfunction changeSelectorClass(selector, type) {\n\n\t//console.log(selector, type);\n\tselector.classList.remove(...classTypes);\n\tselector.classList.add(type);\n}\n\nconst options = {\n\tenableTime: true,\n\ttime_24hr: true,\n\tdefaultDate: new Date(),\n\tminuteIncrement: 1,\n\tonChange(selectedDates) {\n\t\tif (selectedDates[0] > new Date()) {\n\t\t\tchangeSelectorClass(btnStart, \"normal\");\n\t\t}\n\t\telse {\n\t\t\tchangeSelectorClass(btnStart, \"disabled\");\n\t\t};\n\t},\n\tonClose(selectedDates) {\n\t\tuserSelectedDate = selectedDates[0];\n\t},\n};\n\nflatpickr(\"#datetime-picker\", options);\n\nfunction convertMs(ms) {\n\t// Number of milliseconds per unit of time\n\tconst second = 1000;\n\tconst minute = second * 60;\n\tconst hour = minute * 60;\n\tconst day = hour * 24;\n\n\t// Remaining days\n\tconst days = Math.floor(ms / day);\n\t// Remaining hours\n\tconst hours = Math.floor((ms % day) / hour);\n\t// Remaining minutes\n\tconst minutes = Math.floor(((ms % day) % hour) / minute);\n\t// Remaining seconds\n\tconst seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n\treturn { days, hours, minutes, seconds };\n}\n\nbtnStart.addEventListener(\"click\", (e) => {\n\te.target.blur();\n\n\tchangeSelectorClass(btnStop, \"normal\");\n\tchangeSelectorClass(btnStart, \"disabled\");\n\tchangeSelectorClass(inputField, \"disabled\");\n\n\tconst timeDelta = userSelectedDate - new Date();\n\t//let timeToMs = convertMs(timeDelta);\n\t//console.log(timeDelta);\n\t//console.log(btnStop);\n\n\n\ttimerId = setTimeout(() => {\n\t\tchangeSelectorClass(btnStart, \"normal\");\n\t\tchangeSelectorClass(inputField, \"normal\");\n\t}, timeDelta);\n\n\tintervalId = setInterval(() => {\n\t\tlet ticker = userSelectedDate - new Date();\n\t\tlet timeToMs = convertMs(ticker);\n\n\t\ttimerCounter.forEach(el => {\n\t\t\tconst keys = Object.keys(el.dataset);\n\t\t\tconst key = keys[0];\n\n\t\t\t//console.log(key);\n\t\t\t//console.log(el);\n\n\t\t\tif (timeToMs[key] !== undefined) {\n\t\t\t\tel.textContent = String(timeToMs[key]).padStart(2, \"0\");\n\t\t\t}\n\t\t});\n\n\t}, 1000);\n\n});\n\nbtnStop.addEventListener(\"click\", (e) => {\n\te.target.blur();\n\tchangeSelectorClass(btnStop, \"disabled\");\n\tchangeSelectorClass(btnStart, \"normal\");\n\tchangeSelectorClass(inputField, \"normal\");\n\n\tif (intervalId) clearInterval(intervalId);\n\tif (timerId) clearTimeout(timerId);\n\n\ttimerCounter.forEach(el => {\n\t\tel.textContent = \"00\";\n\t});\n\n});"],"names":["userSelectedDate","timerId","intervalId","btnStart","btnStop","inputField","classTypes","timerCounter","changeSelectorClass","selector","type","options","selectedDates","flatpickr","convertMs","ms","days","hours","minutes","seconds","e","timeDelta","ticker","timeToMs","el","key"],"mappings":"wIAKA,IAAIA,EACAC,EACAC,EAEJ,MAAMC,EAAW,SAAS,cAAc,eAAe,EACjDC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAa,SAAS,cAAc,cAAc,EAElDC,EAAa,CAAC,SAAU,UAAU,EAElCC,EAAe,SAAS,iBAAiB,QAAQ,EAEvD,SAASC,EAAoBC,EAAUC,EAAM,CAG5CD,EAAS,UAAU,OAAO,GAAGH,CAAU,EACvCG,EAAS,UAAU,IAAIC,CAAI,CAC5B,CAEA,MAAMC,EAAU,CACf,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,SAASC,EAAe,CACnBA,EAAc,CAAC,EAAI,IAAI,KAC1BJ,EAAoBL,EAAU,QAAQ,EAGtCK,EAAoBL,EAAU,UAAU,CAEzC,EACD,QAAQS,EAAe,CACtBZ,EAAmBY,EAAc,CAAC,CAClC,CACF,EAEAC,EAAU,mBAAoBF,CAAO,EAErC,SAASG,EAAUC,EAAI,CAQtB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAEAhB,EAAS,iBAAiB,QAAUiB,GAAM,CACzCA,EAAE,OAAO,OAETZ,EAAoBJ,EAAS,QAAQ,EACrCI,EAAoBL,EAAU,UAAU,EACxCK,EAAoBH,EAAY,UAAU,EAE1C,MAAMgB,EAAYrB,EAAmB,IAAI,KAMzCC,EAAU,WAAW,IAAM,CAC1BO,EAAoBL,EAAU,QAAQ,EACtCK,EAAoBH,EAAY,QAAQ,CACxC,EAAEgB,CAAS,EAEZnB,EAAa,YAAY,IAAM,CAC9B,IAAIoB,EAAStB,EAAmB,IAAI,KAChCuB,EAAWT,EAAUQ,CAAM,EAE/Bf,EAAa,QAAQiB,GAAM,CAE1B,MAAMC,EADO,OAAO,KAAKD,EAAG,OAAO,EAClB,CAAC,EAKdD,EAASE,CAAG,IAAM,SACrBD,EAAG,YAAc,OAAOD,EAASE,CAAG,CAAC,EAAE,SAAS,EAAG,GAAG,EAE1D,CAAG,CAED,EAAE,GAAI,CAER,CAAC,EAEDrB,EAAQ,iBAAiB,QAAUgB,GAAM,CACxCA,EAAE,OAAO,OACTZ,EAAoBJ,EAAS,UAAU,EACvCI,EAAoBL,EAAU,QAAQ,EACtCK,EAAoBH,EAAY,QAAQ,EAEpCH,GAAY,cAAcA,CAAU,EACpCD,GAAS,aAAaA,CAAO,EAEjCM,EAAa,QAAQiB,GAAM,CAC1BA,EAAG,YAAc,IACnB,CAAE,CAEF,CAAC"}